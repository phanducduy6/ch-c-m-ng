<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C·ªïng Thanh To√°n: VCB - Zalo - MoMo</title>
    <style>
        body {
            font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #e9ecef;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
        }
        .card {
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        h2 { color: #333; margin: 0 0 15px 0; font-size: 22px; }

        /* KHU V·ª∞C CH·ªåN 3 C·ªîNG */
        .bank-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: #f8f9fa;
            padding: 5px;
            border-radius: 12px;
        }
        .tab-btn {
            flex: 1;
            padding: 12px 5px;
            border: none;
            border-radius: 8px;
            background: transparent;
            color: #888;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            font-size: 13px;
        }
        .tab-btn:hover { background: #e9ecef; }
        
        /* Hi·ªáu ·ª©ng khi ch·ªçn t·ª´ng tab */
        .tab-btn.active { background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.08); color: #000; }
        .tab-btn.active[data-bank="VCB"] { color: #00C220; border-bottom: 3px solid #00C220; }
        .tab-btn.active[data-bank="ZALO"] { color: #0068FF; border-bottom: 3px solid #0068FF; }
        .tab-btn.active[data-bank="MOMO"] { color: #A50064; border-bottom: 3px solid #A50064; }

        /* Khung th√¥ng tin */
        .bank-info {
            background: #fcfcfc;
            border: 1px solid #eee;
            padding: 15px;
            border-radius: 16px;
            margin-bottom: 20px;
            text-align: left;
            font-size: 14px;
            transition: 0.3s;
        }
        .bank-row { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .bank-val { font-weight: bold; color: #333; }

        input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 24px;
            text-align: center;
            font-weight: bold;
            color: #333;
            outline: none;
            box-sizing: border-box;
            background: #f9fafb;
            margin-bottom: 15px;
        }
        input:focus { background: white; border-color: #333; }

        #qr_img {
            width: 100%;
            border-radius: 12px;
            border: 1px solid #eee;
            margin-bottom: 15px;
            display: block;
            min-height: 250px;
            object-fit: contain;
            background: #fafafa;
        }

        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 15px;
            cursor: pointer;
            text-decoration: none;
            margin-bottom: 10px;
            box-sizing: border-box;
            color: white;
            transition: 0.2s;
        }
        .btn-open { background-color: #00C220; }
        .btn-save { background-color: #4b5563; }
        
        .note { font-size: 12px; color: #999; margin-top: 10px; font-style: italic; }
    </style>
</head>
<body>

    <div class="card">
        <h2>Thanh To√°n</h2>
        
        <div class="bank-tabs">
            <button class="tab-btn active" data-bank="VCB" onclick="switchBank('VCB')">Vietcombank</button>
            <button class="tab-btn" data-bank="ZALO" onclick="switchBank('ZALO')">ZaloPay</button>
            <button class="tab-btn" data-bank="MOMO" onclick="switchBank('MOMO')">MoMo</button>
        </div>

        <div class="bank-info" id="bankInfoBox">
            <div class="bank-row"><span>K√™nh:</span> <span class="bank-val" id="lbl_bank">Vietcombank</span></div>
            <div class="bank-row"><span>Ng∆∞·ªùi nh·∫≠n:</span> <span class="bank-val" id="lbl_name">PHAN DUC DUY</span></div>
            <div class="bank-row"><span>S·ªë t√†i kho·∫£n:</span> <span class="bank-val" id="lbl_acc">1041249904</span></div>
        </div>

        <input type="tel" id="amount" placeholder="Nh·∫≠p s·ªë ti·ªÅn..." onkeyup="formatMoney(this)">

        <img id="qr_img" src="" alt="QR Code"/>

        <div class="btn-group">
            <button class="btn btn-save" onclick="downloadQR()">
                ‚¨á T·∫£i ·∫¢nh QR
            </button>
            <a href="#" id="deepLinkBtn" class="btn btn-open">
                üöÄ M·ªü App Thanh To√°n
            </a>
        </div>
        
        <p class="note" id="noteText">*Nh·∫≠p s·ªë ti·ªÅn ƒë·ªÉ t·∫°o m√£ QR t·ª± ƒë·ªông</p>
    </div>

    <script>
        // --- C·∫§U H√åNH TH√îNG TIN ---
        const BANKS = {
            "VCB": {
                type: "BANK", // Lo·∫°i Ng√¢n h√†ng (D√πng VietQR)
                name: "Vietcombank",
                acc: "1041249904",
                user: "PHAN DUC DUY",
                color: "#eefbf3",
                border: "#00C220",
                logo: "https://img.vietqr.io/image/VCB-1041249904-compact2.png", // ·∫¢nh g·ªëc
                appLink: "vcbdigibank://qr"
            },
            "ZALO": {
                type: "WALLET", // Lo·∫°i V√≠ (D√πng ·∫£nh tƒ©nh)
                name: "V√≠ ZaloPay",
                acc: "09xxxxxxxxx", // <-- ƒêI·ªÄN S·ªê ZALO C·ª¶A B·∫†N
                user: "PHAN DUC DUY",
                color: "#e6f2ff",
                border: "#0068FF",
                // Thay link ·∫£nh QR Zalo c·ªßa b·∫°n v√†o d√≤ng d∆∞·ªõi:
                logo: "https://upload.wikimedia.org/wikipedia/vi/7/77/ZaloPay_Logo.png", 
                appLink: "zalopay://"
            },
            "MOMO": {
                type: "WALLET", // Lo·∫°i V√≠ (D√πng ·∫£nh tƒ©nh)
                name: "V√≠ MoMo",
                acc: "09xxxxxxxxx", // <-- ƒêI·ªÄN S·ªê MOMO C·ª¶A B·∫†N
                user: "PHAN DUC DUY",
                color: "#fceef5",
                border: "#A50064",
                // Thay link ·∫£nh QR MoMo c·ªßa b·∫°n v√†o d√≤ng d∆∞·ªõi:
                logo: "https://upload.wikimedia.org/wikipedia/vi/f/fe/MoMo_Logo.png",
                appLink: "momo://"
            }
        };

        let currentBank = "VCB"; 

        function switchBank(bankCode) {
            currentBank = bankCode;
            const data = BANKS[bankCode];

            // 1. ƒê·ªïi m√†u Tab
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.dataset.bank === bankCode) btn.classList.add('active');
            });

            // 2. ƒê·ªïi th√¥ng tin hi·ªÉn th·ªã
            document.getElementById("lbl_bank").innerText = data.name;
            document.getElementById("lbl_name").innerText = data.user;
            document.getElementById("lbl_acc").innerText = data.acc;

            // 3. ƒê·ªïi m√†u s·∫Øc giao di·ªán
            const infoBox = document.getElementById("bankInfoBox");
            infoBox.style.backgroundColor = data.color;
            infoBox.style.borderColor = data.border;
            
            const btnOpen = document.getElementById("deepLinkBtn");
            btnOpen.style.backgroundColor = data.border;
            btnOpen.href = data.appLink;

            // 4. X·ª≠ l√Ω QR
            const amountInput = document.getElementById("amount");
            
            if (data.type === "WALLET") {
                // N·∫øu l√† V√≠ -> Hi·ªán ·∫£nh tƒ©nh (logo ho·∫∑c QR c√° nh√¢n)
                document.getElementById("qr_img").src = data.logo;
                document.getElementById("noteText").innerText = "*L∆∞u √Ω: V√≠ n√†y ch·ªâ hi·ªán QR tƒ©nh (kh√¥ng t·ª± ƒë·ªïi ti·ªÅn)";
                amountInput.disabled = false; // V·∫´n cho nh·∫≠p ti·ªÅn ƒë·ªÉ nh·ªõ
            } else {
                // N·∫øu l√† Ng√¢n h√†ng -> Ch·∫°y h√†m t·∫°o QR ƒë·ªông
                document.getElementById("noteText").innerText = "*Nh·∫≠p s·ªë ti·ªÅn ƒë·ªÉ t·∫°o m√£ QR t·ª± ƒë·ªông";
                amountInput.disabled = false;
                const rawAmount = amountInput.value.replace(/\D/g, "");
                updateQR(rawAmount);
            }
        }

        // Kh·ªüi ch·∫°y
        switchBank('VCB');

        function formatMoney(input) {
            let val = input.value.replace(/\D/g, "");
            input.value = val ? parseInt(val).toLocaleString('en-US') : "";
            
            // Ch·ªâ update QR n·∫øu l√† Ng√¢n h√†ng (VCB)
            if (BANKS[currentBank].type === "BANK") {
                updateQR(val);
            }
        }

        function updateQR(amount) {
            const data = BANKS[currentBank];
            let url;
            if(amount > 0) {
                url = `https://img.vietqr.io/image/VCB-${data.acc}-compact2.png?amount=${amount}&addInfo=THANH TOAN&accountName=${data.user}`;
            } else {
                url = `https://img.vietqr.io/image/VCB-${data.acc}-compact2.png`;
            }
            document.getElementById("qr_img").src = url;
        }

        async function downloadQR() {
            const btn = document.querySelector(".btn-save");
            btn.innerText = "‚è≥ ƒêang t·∫£i...";
            try {
                const img = document.getElementById("qr_img");
                const blob = await (await fetch(img.src)).blob();
                const a = document.createElement("a");
                a.href = URL.createObjectURL(blob);
                a.download = `QR_${currentBank}.png`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                btn.innerText = "‚úÖ ƒê√£ l∆∞u!";
            } catch (e) {
                alert("L·ªói t·∫£i ·∫£nh (Do ch√≠nh s√°ch b·∫£o m·∫≠t). H√£y ch·ª•p m√†n h√¨nh nh√©!");
            }
            setTimeout(() => btn.innerText = "‚¨á T·∫£i ·∫¢nh QR", 2000);
        }
    </script>
</body>
</html>
