<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh To√°n VCB - Phan Duc Duy</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #f2f4f7;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 15px;
        }
        .card {
            background: white;
            padding: 25px;
            border-radius: 24px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            text-align: center;
            width: 100%;
            max-width: 400px;
        }
        .header { margin-bottom: 20px; }
        .header h2 { color: #00C220; margin: 0; font-size: 24px; }
        .header p { color: #666; margin: 5px 0 0 0; font-size: 14px; }

        .bank-info {
            background: #f0fdf4;
            border: 1px dashed #00C220;
            padding: 15px;
            border-radius: 16px;
            margin-bottom: 20px;
            text-align: left;
            color: #166534;
        }
        .bank-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 15px; }
        .bank-row:last-child { margin-bottom: 0; }
        .bank-label { color: #15803d; opacity: 0.8; }
        .bank-value { font-weight: bold; }

        .input-group { margin-bottom: 20px; }
        input {
            width: 100%;
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            font-size: 26px;
            text-align: center;
            font-weight: bold;
            color: #00C220;
            outline: none;
            box-sizing: border-box;
            background: #f9fafb;
            transition: 0.2s;
        }
        input:focus { border-color: #00C220; background: white; box-shadow: 0 0 0 4px rgba(0,194,32,0.1); }
        input::placeholder { color: #d1d5db; font-size: 20px; font-weight: normal; }

        #qr_img {
            width: 100%;
            border-radius: 16px;
            border: 1px solid #f3f4f6;
            margin-bottom: 20px;
            display: block;
        }

        .btn-group { display: flex; flex-direction: column; gap: 12px; }
        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 14px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.2s;
        }
        .btn-save { background-color: #374151; color: white; }
        .btn-open { background-color: #00C220; color: white; box-shadow: 0 4px 12px rgba(0,194,32,0.3); }
        .btn:active { transform: scale(0.98); }
        
        .note { font-size: 13px; color: #9ca3af; margin-top: 20px; line-height: 1.5; }
    </style>
</head>
<body>

    <div class="card">
        <div class="header">
            <h2>Chuy·ªÉn Kho·∫£n Nhanh</h2>
            <p>Vietcombank Digibank</p>
        </div>
        
        <div class="bank-info">
            <div class="bank-row">
                <span class="bank-label">Ch·ªß t√†i kho·∫£n:</span>
                <span class="bank-value">PHAN DUC DUY</span>
            </div>
            <div class="bank-row">
                <span class="bank-label">S·ªë t√†i kho·∫£n:</span>
                <span class="bank-value" style="font-size:18px; letter-spacing:1px;">1041249904</span>
            </div>
        </div>

        <div class="input-group">
            <input type="tel" id="amount" placeholder="Nh·∫≠p s·ªë ti·ªÅn..." onkeyup="formatMoney(this)">
        </div>

        <img id="qr_img" src="" alt="QR Code"/>

        <div class="btn-group">
            <button class="btn btn-save" onclick="downloadQR()">
                ‚¨á T·∫£i QR & L∆∞u v√†o m√°y
            </button>
            
            <a href="vcbdigibank://qr" class="btn btn-open">
                üöÄ M·ªü App Qu√©t M√£ Ngay
            </a>
        </div>

        <p class="note">
            üí° <strong>M·∫πo:</strong> Nh·∫•n "T·∫£i QR" tr∆∞·ªõc, sau ƒë√≥ nh·∫•n "M·ªü App" r·ªìi ch·ªçn bi·ªÉu t∆∞·ª£ng üñºÔ∏è (·∫£nh) ƒë·ªÉ t·∫£i QR l√™n.
        </p>
    </div>

    <script>
        // --- TH√îNG TIN C·ªê ƒê·ªäNH ---
        const MY_BANK = "VCB";
        const MY_ACCOUNT = "1041249904";
        const MY_NAME = "PHAN DUC DUY";

        // Kh·ªüi t·∫°o QR m·∫∑c ƒë·ªãnh (0ƒë)
        updateQR(0);

        function formatMoney(input) {
            // Xo√° k√Ω t·ª± kh√¥ng ph·∫£i s·ªë
            let value = input.value.replace(/\D/g, "");
            
            // Format d·∫•u ph·∫©y
            if (value) {
                input.value = parseInt(value).toLocaleString('en-US');
            } else {
                input.value = "";
            }
            
            // C·∫≠p nh·∫≠t QR
            updateQR(value);
        }

        function updateQR(amount) {
            let qrSrc;
            if(amount > 0) {
                // C√≥ ti·ªÅn -> Hi·ªán QR ƒë·∫ßy ƒë·ªß
                qrSrc = `https://img.vietqr.io/image/${MY_BANK}-${MY_ACCOUNT}-compact2.png?amount=${amount}&addInfo=THANH TOAN&accountName=${MY_NAME}`;
            } else {
                // Ch∆∞a nh·∫≠p ti·ªÅn -> Hi·ªán QR t√†i kho·∫£n
                qrSrc = `https://img.vietqr.io/image/${MY_BANK}-${MY_ACCOUNT}-compact2.png`;
            }
            document.getElementById("qr_img").src = qrSrc;
        }

        async function downloadQR() {
            const imgUrl = document.getElementById("qr_img").src;
            const btn = document.querySelector('.btn-save');
            const originalText = btn.innerText;
            
            btn.innerText = "‚è≥ ƒêang t·∫£i...";
            
            try {
                const response = await fetch(imgUrl);
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement("a");
                a.href = url;
                a.download = `QR_VCB_${MY_ACCOUNT}.png`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                btn.innerText = "‚úÖ ƒê√£ l∆∞u ·∫£nh!";
                setTimeout(() => btn.innerText = originalText, 2000);
            } catch (error) {
                alert("L·ªói t·∫£i ·∫£nh! H√£y nh·∫•n gi·ªØ v√†o ·∫£nh QR ƒë·ªÉ l∆∞u th·ªß c√¥ng.");
                btn.innerText = originalText;
            }
        }
    </script>
</body>
</html>
